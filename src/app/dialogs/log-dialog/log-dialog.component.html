<h2>{{ mode() }}</h2>
<div class="content">
  <form #form="ngForm">

    <div class="dialog-row">
      <label for="userName">Přihlašovací jméno:</label>
      <input #userNameInput="ngModel" [(ngModel)]="userName" [maxLength]="20" [minlength]="3" [required]="true"
             id="userName"
             name="userName" pInputText
             type="text"/>
    </div>
    <div>@if (userNameInput.invalid && userNameInput.touched) {
      <small [style.visibility]="userNameInput.errors?.['required'] ? 'visible' : 'hidden'">Name is required.</small>
      <small [style.visibility]="userNameInput.errors?.['minlength'] ? 'visible' : 'hidden'">Min 3 characters.</small>
    }
    </div>

    <div class="dialog-row">
      <label for="password">Heslo:</label>
      <input #passwordInput="ngModel" [(ngModel)]="password" [maxLength]="12" [minlength]="8" [required]="true"
             id="password"
             name="password" pInputText passwordCharValid
             type="password"/>
    </div>
    <div>@if (passwordInput.invalid && passwordInput.touched) {
      <small [style.visibility]="passwordInput.errors?.['required'] ? 'visible' : 'hidden'">Password is
        required.</small>
      <small [style.visibility]="passwordInput.errors?.['minlength'] ? 'visible' : 'hidden'">Min 8 characters.</small>
      <small [style.visibility]="passwordInput.errors?.['strongPassword'] ? 'visible' : 'hidden'">Heslo musí obsahovat
        velké písmeno, symbol a
        číslici.</small>
    }
    </div>
    @if (mode() === LogDialogMode.Edit) {
      <div class="dialog-row">
        <label for="newPassword">Nové heslo:</label>
        <input #newPasswordInput="ngModel" [(ngModel)]="newPassword" [maxLength]="12" [minlength]="8" [required]="true"
               name="newPassword"
               id="newPassword" passwordCharValid pInputText type="password"/>
      </div>
      <div>@if (newPasswordInput.invalid && newPasswordInput.touched) {
        <small [style.visibility]="newPasswordInput.errors?.['required'] ? 'visible' : 'hidden'">Password is
          required.</small>
        <small [style.visibility]="newPasswordInput.errors?.['minlength'] ? 'visible' : 'hidden'">Min 8
          characters.</small>
        <small [style.visibility]="newPasswordInput.errors?.['strongPassword'] ? 'visible' : 'hidden'">Heslo musí
          obsahovat velké písmeno,
          symbol a
          číslici.</small>
      }
      </div>
    }
    @if (mode() !== LogDialogMode.LogIn) {
      <div class="dialog-row">
        <label for="passwordRepeat">Opakujte heslo:</label>
        <input #passwordRepeatInput="ngModel" [(ngModel)]="passwordRepeat" [maxLength]="12" [minlength]="8"
               [required]="true" [repeatPasswordValid]="password || newPassword" name="passwordRepeat" passwordCharValid
               id="passwordRepeat"
               pInputText
               type="password"/>
      </div>
      <div>@if (passwordRepeatInput.invalid && passwordRepeatInput.touched) {
        <small [style.visibility]="passwordRepeatInput.errors?.['required'] ? 'visible' : 'hidden'">Password is
          required.</small>
        <small [style.visibility]="passwordRepeatInput.errors?.['minlength'] ? 'visible' : 'hidden'">Min 8
          characters.</small>
        <small [style.visibility]="passwordRepeatInput.errors?.['strongPassword'] ? 'visible' : 'hidden'">Heslo musí
          obsahovat velké písmeno, symbol a číslici.</small>
        <small [style.visibility]="passwordRepeatInput.errors?.['repeatPasswordValid'] ? 'visible' : 'hidden'">Hesla se
          liší.</small>
      }
      </div>
    }

    <div class="buttons">
      <p-button (onClick)="confirm()" [disabled]="form.invalid">Ok</p-button>
      <p-button (onClick)="cancel()">Storno</p-button>
    </div>
  </form>
</div>

